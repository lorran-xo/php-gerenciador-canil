#INNERJOIN que retorna TUDO das tabelas sem filtro.

SELECT
  can.id, 
  can.tipo, 
  can.sexo, 
  can.idade,
  can.castrado,
  cap.cor, 
  cap.porte, 
  cap.peso,
  cid.codigo,
  cid.apelido,
  cra.raca,
  cra.comportamento,
  csi.adotado,
  csi.descricao,
  csi.nome_responsavel_resgate,
  csi.data_resgate,
  csi.nome_responsavel_adocao,
  csi.cpf_responsavel_adocao,
  csi.data_adocao
FROM
  canil.animais can
    INNER JOIN canil.aparencia cap ON can.id = cap.id_animal
    INNER JOIN canil.identificacao cid ON can.id = cid.id_animal
    INNER JOIN canil.raca cra ON can.id = cra.id_animal
    INNER JOIN canil.situacao csi ON can.id = csi.id_animal


#INNERJOIN de retorno pras telas 'Início' e 'Adoção' (Apenas animais presentes no Canil adotados = false).
-com PAGINACAO
SELECT
    can.id,
    can.tipo, 
    can.sexo, 
    can.idade,
    can.castrado,
    cap.cor, 
    cap.porte, 
    cap.peso,
    cid.codigo,
    cid.apelido,
    cra.raca,
    cra.comportamento,
    csi.descricao,
    csi.nome_responsavel_resgate,
    csi.data_resgate
  FROM
    canil.animais can
      INNER JOIN canil.aparencia cap ON can.id = cap.id_animal
      INNER JOIN canil.identificacao cid ON can.id = cid.id_animal
      INNER JOIN canil.raca cra ON can.id = cra.id_animal
      INNER JOIN canil.situacao csi ON can.id = csi.id_animal
  WHERE csi.adotado = 0 LIMIT $pagina_atual, $itens_por_pagina

-pela PESQUISA
SELECT
    can.id,
    can.tipo, 
    can.sexo, 
    can.idade,
    can.castrado,
    cap.cor, 
    cap.porte, 
    cap.peso,
    cid.codigo,
    cid.apelido,
    cra.raca,
    cra.comportamento,
    csi.descricao,
    csi.nome_responsavel_resgate,
    csi.data_resgate
  FROM
    canil.animais can
      INNER JOIN canil.aparencia cap ON can.id = cap.id_animal
      INNER JOIN canil.identificacao cid ON can.id = cid.id_animal
      INNER JOIN canil.raca cra ON can.id = cra.id_animal
      INNER JOIN canil.situacao csi ON can.id = csi.id_animal
  WHERE csi.adotado = 0 AND CONCAT(`codigo`, `tipo`, `raca`, `sexo`, `cor`, `porte`, `data_resgate`) LIKE '%".$valueToSearch."%'";


#INNERJOIN de retorno pra tela de 'Adotados' (Apenas animais que já foram adotados adotado = true).
-com PAGINACAO

SELECT
    can.id,
    can.tipo,
    can.sexo,
    cap.cor,
    cap.porte,
    cid.codigo,
    cid.apelido,
    cra.raca,
    csi.nome_responsavel_adocao,
    csi.cpf_responsavel_adocao,
    csi.data_adocao
  FROM
    canil.animais can
      INNER JOIN canil.aparencia cap ON can.id = cap.id_animal
      INNER JOIN canil.identificacao cid ON can.id = cid.id_animal
      INNER JOIN canil.raca cra ON can.id = cra.id_animal
      INNER JOIN canil.situacao csi ON can.id = csi.id_animal
  WHERE csi.adotado = 1 LIMIT $pagina_atual, $itens_por_pagina

-pela PESQUISA

SELECT
    can.id,
    can.tipo,
    can.sexo,
    cap.cor,
    cap.porte,
    cid.codigo,
    cid.apelido,
    cra.raca,
    csi.nome_responsavel_adocao,
    csi.cpf_responsavel_adocao,
    csi.data_adocao
  FROM
    canil.animais can
      INNER JOIN canil.aparencia cap ON can.id = cap.id_animal
      INNER JOIN canil.identificacao cid ON can.id = cid.id_animal
      INNER JOIN canil.raca cra ON can.id = cra.id_animal
      INNER JOIN canil.situacao csi ON can.id = csi.id_animal
  WHERE csi.adotado = 1 AND CONCAT(`codigo`, `tipo`, `apelido`, `raca`, `sexo`, `cor`, `nome_responsavel_adocao`, `cpf_responsavel_adocao`, `data_adocao`) LIKE '%".$valueToSearch."%'



#INSERTS
-CADASTRAR NOVO:

START TRANSACTION;
   INSERT INTO canil.animais(tipo, sexo, idade, castrado) VALUES ('gato', 'fêmea', '3 meses', 1);
   INSERT INTO canil.aparencia(cor, porte, peso, id_animal) VALUES ('branco', 'grande', 15, 10);
   INSERT INTO canil.identificacao(codigo, apelido, id_animal) VALUES ('9185', 'Teste', 10);
   INSERT INTO canil.raca(raca, comportamento, id_animal) VALUES ('vira-lata', 'calmo', 10);
   INSERT INTO canil.situacao(adotado, descricao, nome_responsavel_resgate, data_resgate, nome_responsavel_adocao, cpf_responsavel_adocao, data_adocao, id_animal) VALUES (0,'encontrado sozinho','Cassio Texeiras', NOW(), NULL, NULL, NULL, 10);
COMMIT;


-- NO PHP E PEGANDO O ID AUTOMATICO:
    $mysqli->query("INSERT INTO animais (tipo, sexo, idade, can.castrado) VALUES ('$_SESSION[tipo]', '$_SESSION[sexo]', '$_SESSION[idade]', '$_SESSION[castrado]')");
			$id_atual = $mysqli->insert_id;
			$mysqli->query("INSERT INTO aparencia (cor, porte, peso, id_animal) VALUES ('$_SESSION[cor]', '$_SESSION[porte]', '$_SESSION[peso]', '$id_atual')");
			$mysqli->query("INSERT INTO identificacao (codigo, apelido, id_animal) VALUES ('$_SESSION[codigo]', '$_SESSION[apelido]', '$id_atual')");
			$mysqli->query("INSERT INTO raca (raca, comportamento, id_animal) VALUES ('$_SESSION[raca]', '$_SESSION[comportamento]', '$id_atual')");
			$mysqli->query("INSERT INTO situacao (adotado, descricao, nome_responsavel_resgate, data_resgate, nome_responsavel_adocao, cpf_responsavel_adocao, data_adocao, id_animal) 
			VALUES (0, '$_SESSION[descricao]', '$_SESSION[nome_responsavel_resgate]', NOW(), NULL, NULL, NULL, '$id_atual')");


-ANIMAL SENDO ADOTADO:
UPDATE `situacao` SET `adotado`= 1, `nome_responsavel_adocao`='Carlos Chagas',`cpf_responsavel_adocao`='112.471.387-49' ,`data_adocao`= NOW() WHERE id_animal = 10

*VER START TRANSACTION*



#DELETES
 DELETE FROM animais where id=5;



 #UPDATES

 -Tabela do inicio (animais não adotados)
START TRANSACTION;
   UPDATE canil.animais SET tipo= 'gato', sexo= 'nao definido', idade= 220, castrado= 1 WHERE id = 11;
   UPDATE canil.aparencia SET cor= 'vermelho', porte= 'grande', peso= 36 WHERE id_animal = 11;
   UPDATE canil.identificacao SET apelido= 'apelido' WHERE id_animal = 11;
   UPDATE canil.raca SET raca='funcionou', comportamento= 'louco' WHERE id_animal = 11;
   UPDATE canil.situacao SET descricao="comprado", nome_responsavel_resgate ="caramelo" WHERE id_animal = 11;
COMMIT;



-Tabela do histórico (animais já adotados)























***** Notas *****

FRONT
FAZER INNERJOIN https://pt.stackoverflow.com/questions/193015/conectar-2-tabelas-com-mesmo-id
--------------------------------- ex: -----------------------------------------
Tipo, sexo, idade, cor, porte, peso, codigo, apelido, raça, comportamento, adotado, descricao,  nomeResponsável, cpfResponsável, data

comissao:

ID | comissao
1  | 13
2  | 26

usuario:
ID  |  nome 
1   |  João 
2   |  Maria


SELECT nome, comissao
FROM tbl_comissao
    INNER JOIN tbl_usuario using (id)

-------------------------------------------------------------------------------

SOLICITAR/RETORNAR:
 -CADASTRO: Insert de->
		canil.animal{
			   Tipo, sexo, idade, castrado
	        }
		canil.aparencia{
			   cor, porte, peso
	        }
		canil.identificacao{
			   codigo, apelido
	        }
		canil.raca{
			   raca, comportamento
	        }
		canil.situacao{
			   adotado(bool), descriçao, responsável(por encontrar/funcionario), data atual*
	        }

RETORNA TUDO PRA TABELA DO INICIO, menos situacao.adotado = false e canil.situacao mostra como 'Resgatado por:'

 -ADOÇÃO: Update de->

		canil.situacao{
			   nomeResponsável e cpfResponsável(muda pro nome de quem adotou), nova data*
	        }

 Retorna os principais pra tabela de adocao, menos situacao.adotado = false e canil.situacao mostra como 'Adotado por:'


--------- 

Páginas (Mínimo 6 links)

-Início
	Tabela listando os animais do canil, botão de editar e botão de ver informações adicionais {Saúde, como foi pego, etc}, botão excluir

-Resgate
	Tela direto com os campos para preencher para adicionar novo animal no banco com botão REGISTRAR q redireciona para o Início

-Adoção
	Tabela listando os animais do canil, podendo adotar (update no banco q faz aparecer o animal apenas na tabela de Adotados).

-Adotados
	Tabela listando os animais que ja foram adotados com campo mostrando dados de quem adotou.

-Apoiar
	Escrever sobre apoiar as ongs de JF, PIX, Sites, informações

-Sobre nós
	Escrever sobre mim e o desenvolvimento do sistema. *Passar icones de redes sociais pra lá

#IMPLEMENTAÇÃO: Ao adotar nao dar delete, dar update em algum valor que faz com que nao apareça mais nas tabelas, apenas em uma
chamada 'Adotados' que possui campo de registrar os dados de quem foi adotado.

#################################################################################################################################################

Fazer 5 >> tabelas <<

Animal{ peso, descricao}
Raça{puddle}
aparencia{cor, pqno,medio,grande} 
Identificação {apelido e codigo alocado pra placa dele}
Situação

Tabela1 Animal{
	Tipo (gato, cachorro, pássaro)
	Sexo
	Idade	
}

Tabela2 Raça{
	raça
	comportamento: raivoso, calmo, balanceado
}

Tabela3 Aparencia{
	cor
	porte (pequeno, médio grande)
	Peso(kg)
}

Tabela4 Identificação {
	Apelido atribuido
	Código atribuido
}

tabela5 Situação{
	Descriçao/Situação/Como que foi encontrado
	nomeResponsável
	cpfResponsável
	Data
}

Criar coluna nova na tabela:
ALTER TABLE canil.animais ADD data date(null)
ALTER TABLE canil.situacao ADD motivo_devolucao varchar(100) DEFAULT NULL

Videos de auxílio:
Criacao da pagina html/php> https://www.youtube.com/watch?v=LUMFITn510U
Criacao do banco> https://www.youtube.com/watch?v=kvE4bt1X7Sc
Conexao da pagina com o banco> https://www.youtube.com/watch?v=Ki1xh9U23r8
Exibir dados do banco na pagina> https://www.youtube.com/watch?v=TuvO79zyzew
Inserir dados> https://www.youtube.com/watch?v=5p4E2lRrk14&list=PLXmfQ3s1sas7z82_xe-M_N9WoSkOnpF6N&index=3

